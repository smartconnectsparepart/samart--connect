<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Connect - Official Store</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background-color: #f4f4f4; text-align: center; color: #333; }
        header { background-color: #222; color: #ffcc00; padding: 15px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        .admin-nav-btn { background: #ffcc00; color: #222; padding: 8px 15px; border-radius: 5px; font-weight: bold; cursor: pointer; border: none; font-size: 13px; }
        
        .hero { background-color: #333; color: white; padding: 30px 20px; }
        .logo-circle { width: 120px; height: 120px; background: #222; border: 4px solid #ffcc00; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; }
        .logo-text { color: #ffcc00; font-weight: bold; font-size: 15px; text-transform: uppercase; line-height: 1.2; }

        .search-container { margin: 20px auto; max-width: 450px; display: flex; padding: 0 15px; }
        .search-container input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 25px 0 0 25px; outline: none; }
        .search-container button { padding: 12px 20px; background: #ffcc00; border: none; border-radius: 0 25px 25px 0; cursor: pointer; }

        #adminSection { display: none; background: #fff; margin: 20px auto; padding: 20px; max-width: 450px; width: 90%; border-radius: 10px; border: 2px dashed #ffcc00; }
        .admin-box input { width: 90%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px; }
        .add-btn { width: 95%; padding: 10px; background: #222; color: #ffcc00; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; padding: 20px; }
        .product-card { background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; justify-content: space-between; }
        
        /* රූපය ඇදෙන්නේ නැති වෙන්න මෙන්න මේ කොටස හැදුවා */
        .product-card img { 
            width: 100%; 
            height: 150px; 
            object-fit: contain; /* රූපයේ නියම හැඩය ආරක්ෂා කරයි */
            background-color: #fff;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .btn-whatsapp { background-color: #25D366; color: white; padding: 10px; text-decoration: none; border-radius: 5px; display: block; font-weight: bold; margin-top: 5px; font-size: 14px; }
        .del-btn { display: none; background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; margin-top: 8px; cursor: pointer; width: 100%; font-weight: bold; }

        .bank-details { background: white; margin: 40px auto 20px; padding: 20px; max-width: 450px; width: 90%; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: left; border-left: 5px solid #ffcc00; }
        footer { background: #222; color: white; padding: 20px; margin-top: 20px; font-size: 14px; }
        footer b { color: #ffcc00; }
    </style>
</head>
<body>

<header>
    <div style="width: 80px;"></div>
    <h1 style="margin:0; font-size: 24px;">SMART CONNECT</h1>
    <button class="admin-nav-btn" onclick="checkAdmin()">ADMIN</button>
</header>

<div class="hero">
    <div class="logo-circle">
        <div class="logo-text">SMART<br>CONNECT</div>
    </div>
    <p>Mobile Spare Parts & Accessories</p>
</div>

<div id="adminSection" class="admin-box">
    <h3><i class="fa fa-plus-circle"></i> Add New Product</h3>
    <input type="text" id="pName" placeholder="Product Name">
    <input type="text" id="pPrice" placeholder="Price (Rs.)">
    <input type="text" id="pUrl" placeholder="Image URL">
    <button class="add-btn" onclick="addNewProduct()">Save to Store</button>
    <button style="background:none; border:none; color:red; cursor:pointer; margin-top:10px;" onclick="hideAdmin()">Logout Admin</button>
</div>

<div class="search-container">
    <input type="text" id="searchInput" placeholder="Search products..." onkeyup="searchProducts()">
    <button><i class="fa fa-search"></i></button>
</div>

<h3 style="margin-top: 30px; text-transform: uppercase;">Our Products</h3>
<div class="product-grid" id="productGrid"></div>

<div class="bank-details">
    <h3><i class="fa fa-university"></i> Payment Details</h3>
    <p><b>Bank:</b> Commercial Bank</p>
    <p><b>Branch:</b> Mathugama</p>
    <p><b>Account Name:</b> Senuja Dilmeth</p>
    <p><b>Account Number:</b> 8021750201</p>
</div>

<footer>Designed & Developed by <b>Senuja Dilmeth</b></footer>

<script>
    const firebaseConfig = { databaseURL: "https://smartconnect-ec061-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    let isAdmin = false;

    function loadProducts() {
        database.ref('products').on('value', (snapshot) => {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            snapshot.forEach((childSnapshot) => {
                const item = childSnapshot.val();
                const key = childSnapshot.key;
                grid.innerHTML += `
                    <div class="product-card">
                        <img src="${item.imageUrl}">
                        <div>
                            <h3 style="font-size: 15px; margin: 5px 0;">${item.name}</h3>
                            <p style="color: blue; font-weight: bold; margin: 5px 0;">Rs. ${item.price}</p>
                        </div>
                        <a href="https://wa.me/94785805283?text=Order: ${item.name}" class="btn-whatsapp">WhatsApp Order</a>
                        <button class="del-btn" id="del-${key}" onclick="deleteProduct('${key}')">Delete Item</button>
                    </div>`;
                if(isAdmin) document.getElementById(`del-${key}`).style.display = 'block';
            });
        });
    }

    function checkAdmin() {
        let pass = prompt("Enter Admin Password:");
        if (pass === "101115") {
            isAdmin = true;
            document.getElementById('adminSection').style.display = 'block';
            let delButtons = document.getElementsByClassName('del-btn');
            for(let btn of delButtons) { btn.style.display = 'block'; }
            window.scrollTo(0, 0);
        } else { alert("Wrong Password!"); }
    }

    function hideAdmin() {
        isAdmin = false;
        document.getElementById('adminSection').style.display = 'none';
        let delButtons = document.getElementsByClassName('del-btn');
        for(let btn of delButtons) { btn.style.display = 'none'; }
    }

    function deleteProduct(key) {
        if (confirm("Are you sure?")) {
            database.ref('products').child(key).remove().then(() => alert("Deleted!"));
        }
    }

    function addNewProduct() {
        const name = document.getElementById('pName').value;
        const price = document.getElementById('pPrice').value;
        const url = document.getElementById('pUrl').value;
        if (name && price && url) {
            database.ref('products').push({ name: name, price: price, imageUrl: url });
            alert("Added!");
            document.getElementById('pName').value = '';
            document.getElementById('pPrice').value = '';
            document.getElementById('pUrl').value = '';
        }
    }

    function searchProducts() {
        let input = document.getElementById('searchInput').value.toLowerCase();
        let cards = document.getElementsByClassName('product-card');
        for (let card of cards) {
            let name = card.getElementsByTagName('h3')[0].innerText.toLowerCase();
            card.style.display = name.includes(input) ? "flex" : "none";
        }
    }

    loadProducts();
</script>
</body>
</html>